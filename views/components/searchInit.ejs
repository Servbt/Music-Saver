
<script>
  // Make sure the client is loaded and sign-in is complete before calling this method.
  function loadClient() {
    gapi.client.setApiKey("AIzaSyDxZy9vQXRU43KQCCmR2MgJHrF9bsAvyUE");
    return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
      .then(function () { console.log("GAPI client loaded for API"); },
        function (err) { console.error("Error loading GAPI client for API", err); });
  }
  function execute() {
    return gapi.client.youtube.search.list({
      "part": [
        "snippet"
      ],
      "maxResults": 25,
        "q": "<%=video.video%>"

    })
      .then(function (response) {
        // Handle the results here (response.result has the parsed body).
        console.log("Response", response);
      },
        function (err) { console.error("Execute error", err); });
  }
  gapi.load("client:auth2", function () {
    gapi.auth2.init({ client_id: "YOUR_CLIENT_ID" });
  });
</script>
<button onclick="loadClient()"> <a action="/search">authorize and load</a> </button>
<button onclick="execute()">execute</button>

